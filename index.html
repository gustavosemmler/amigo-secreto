<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Amigo Secreto üéÑ</title>
  <meta name="theme-color" content="#13060a" />
  <style>
    :root{
      --bg1:#13060a;         /* vinho quase preto */
      --bg2:#2a0a12;         /* vermelho profundo */
      --card: rgba(16, 6, 10, .68);
      --border: rgba(255,255,255,.16);

      --text:#fff7f9;
      --muted: rgba(255,247,249,.78);

      --red:#ff2e4f;
      --red2:#c50d2a;
      --gold:#ffd166;

      --shadow: 0 24px 80px rgba(0,0,0,.55);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(900px 520px at 16% 18%, rgba(255,46,79,.22) 0%, transparent 55%),
        radial-gradient(900px 520px at 84% 28%, rgba(255,209,102,.14) 0%, transparent 55%),
        radial-gradient(900px 620px at 50% 92%, rgba(197,13,42,.18) 0%, transparent 62%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* neve */
    #snow {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      opacity: .95;
    }

    .wrap{
      min-height: 100%;
      display:grid;
      place-items:center;
      padding: 18px 12px 28px;
      position:relative;
      z-index: 1;
    }

    .card{
      width: min(760px, 100%);
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      overflow:hidden;
    }

    .top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding: 14px 14px 10px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 9px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      color: var(--muted);
      font-size: 13px;
      letter-spacing:.2px;
      user-select:none;
    }

    .dot{
      width:9px;height:9px;border-radius:99px;
      background: radial-gradient(circle at 30% 30%, #fff, #fff0 55%),
                  linear-gradient(140deg, var(--gold), var(--red));
      box-shadow: 0 0 0 4px rgba(255,209,102,.12);
    }

    .musicBtn{
      appearance:none;
      border:none;
      cursor:pointer;
      border-radius: 999px;
      padding: 9px 12px;
      font-weight: 900;
      letter-spacing:.2px;
      background: linear-gradient(160deg, rgba(255,46,79,.22), rgba(255,46,79,.10));
      border:1px solid rgba(255,46,79,.28);
      color: var(--text);
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }
    .musicBtn:active{ transform: translateY(1px); }

    .main{
      padding: 4px 14px 16px;
    }

    h1{
      margin: 6px 0 10px;
      font-size: 34px;
      line-height: 1.1;
      letter-spacing: -.7px;
    }

    .sub{
      margin: 0 0 14px;
      color: var(--muted);
      line-height: 1.6;
      font-size: 15.5px;
    }

    .stage{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(160deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      padding: 12px;
      position:relative;
      overflow:hidden;
    }

    .stepTitle{
      font-weight: 900;
      letter-spacing:.2px;
      margin: 0 0 8px;
      font-size: 14px;
      color: rgba(255,247,249,.92);
    }

    .pistas{ display:grid; gap:10px; }
    .pista{
      display:flex; gap:10px; align-items:flex-start;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
    }
    .num{
      width: 30px; height: 30px;
      border-radius: 12px;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.12);
      font-weight: 1000;
      flex: 0 0 auto;
    }
    .pista p{
      margin:0;
      color: var(--muted);
      font-size: 14.5px;
      line-height: 1.45;
    }

    .btnRow{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top: 12px;
    }

    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      border-radius: 14px;
      padding: 12px 14px;
      font-weight: 1000;
      letter-spacing:.2px;
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease, filter .2s ease;
      width:100%;
    }
    @media (min-width: 520px){
      .btn{ width:auto; }
    }
    .btn:active{ transform: translateY(1px); }
    .btn:hover{ filter: brightness(1.06); }

    .ghost{
      background: rgba(255,255,255,.07);
      border: 1px solid rgba(255,255,255,.14);
      color: var(--text);
    }

    .primary{
      background: linear-gradient(160deg, var(--red), var(--red2));
      color: #fff;
      border: 1px solid rgba(255,46,79,.28);
    }

    .gold{
      background: linear-gradient(160deg, var(--gold), #ffe7aa);
      color: #2b0b12;
      border: 1px solid rgba(255,209,102,.35);
    }

    .reveal{
      display:none;
      margin-top: 12px;
      animation: pop .45s ease both;
    }
    @keyframes pop{
      from{ opacity:0; transform: translateY(10px) scale(.98); }
      to{ opacity:1; transform: translateY(0) scale(1); }
    }

    .bigCard{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(160deg, rgba(255,46,79,.16), rgba(255,255,255,.04));
      padding: 14px;
    }

    .who{
      margin:0;
      color: var(--muted);
      font-size: 13.5px;
    }
    .name{
      margin: 4px 0 0;
      font-size: 22px;
      font-weight: 1100;
      letter-spacing:.2px;
    }
    .tag{
      display:inline-flex;
      margin-top: 8px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.07);
      color: var(--muted);
      font-size: 12.5px;
    }

    .msg{
      margin-top: 12px;
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color: var(--muted);
      line-height: 1.65;
      font-size: 14.5px;
    }

    .voucher{
      margin-top: 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,209,102,.30);
      background: linear-gradient(160deg, rgba(255,209,102,.18), rgba(255,46,79,.10));
      padding: 14px;
      position:relative;
      overflow:hidden;
    }
    .voucherTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
    }
    .voucherTitle{
      font-weight: 1100;
      letter-spacing:.2px;
    }
    .amount{
      font-size: 22px;
      font-weight: 1200;
      white-space:nowrap;
    }
    .voucherSmall{
      color: var(--muted);
      font-size: 13px;
      margin-top: 6px;
      line-height: 1.5;
    }

    /* confetti */
    .confetti{ position:absolute; inset:0; pointer-events:none; display:none; overflow:hidden; }
    .confetti i{
      position:absolute;
      width: 10px; height: 16px;
      opacity:.95;
      transform: translateY(-20px) rotate(0deg);
      animation: fall 1.25s ease-in forwards;
      border-radius: 3px;
      mix-blend-mode: screen;
      will-change: transform, opacity;
    }
    @keyframes fall{ to{ transform: translateY(760px) rotate(720deg); opacity:0; } }

    .footer{
      padding: 12px 14px 14px;
      text-align:center;
      color: rgba(255,247,249,.75);
      font-size: 12.5px;
      border-top: 1px solid rgba(255,255,255,.12);
    }

    /* YouTube player escondido */
    #ytHolder{
      position: fixed;
      width: 1px; height: 1px;
      left: -10000px; top: -10000px;
      overflow:hidden;
    }

    /* Modal simples p/ iniciar m√∫sica (melhora compat no mobile) */
    .modal{
      position: fixed;
      inset:0;
      display:none;
      place-items:center;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(6px);
      z-index: 5;
      padding: 14px;
    }
    .modalCard{
      width: min(520px, 100%);
      border-radius: 18px;
      background: rgba(16,6,10,.92);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow);
      padding: 14px;
    }
    .modalCard h3{ margin:0 0 8px; font-size: 18px; }
    .modalCard p{ margin:0 0 12px; color: var(--muted); line-height:1.6; font-size: 14px; }
    .modalRow{ display:flex; gap:10px; flex-wrap:wrap; }
  </style>
</head>

<body>
  <canvas id="snow"></canvas>
  <div id="ytHolder"></div>

  <div class="modal" id="musicModal" aria-hidden="true">
    <div class="modalCard">
      <h3>üéµ M√∫sica</h3>
      <p>Toque em ‚ÄúTocar‚Äù pra come√ßar (o celular precisa desse toque).</p>
      <div class="modalRow">
        <button class="btn primary" id="modalPlay" type="button">Tocar</button>
        <button class="btn ghost" id="modalClose" type="button">Agora n√£o</button>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="card">
      <div class="top">
        <div class="pill"><span class="dot"></span> Amigo Secreto</div>
        <button class="musicBtn" id="musicToggle" type="button">üéµ M√∫sica</button>
      </div>

      <div class="main">
        <h1>Quem ser√° que eu tirei? üéÅ</h1>
        <p class="sub">
          Eu separei algumas pistas‚Ä¶ e depois eu revelo.
        </p>

        <div class="stage">
          <div class="confetti" id="confetti" aria-hidden="true"></div>

          <div class="stepTitle" id="stepTitle">Pista 1 de 6</div>
          <div class="pistas" id="pistas"></div>

          <div class="btnRow">
            <button class="btn ghost" id="nextHint">Pr√≥xima pista</button>
            <button class="btn primary" id="revealBtn">REVELAR</button>
          </div>

          <div class="reveal" id="reveal">
            <div class="bigCard">
              <p class="who">Eu tirei‚Ä¶</p>
              <div class="name" id="targetName">Tainah Bonazzi ‚ú®</div>
              <div class="tag">üíõ minha priminha do cora√ß√£o</div>

              <div class="msg" id="message"></div>

              <div class="voucher">
                <div class="voucherTop">
                  <div>
                    <div class="voucherTitle">Vale-presente</div>
                    <div class="voucherSmall">Me chama e eu transfiro na hora üòÑ</div>
                  </div>
                  <div class="amount" id="amount">R$ 120</div>
                </div>

                <div class="btnRow">
                  <a class="btn gold" id="whatsBtn" href="#" target="_blank" rel="noopener">Me chamar no WhatsApp</a>
                  <button class="btn ghost" id="copyMsg">Copiar mensagem</button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <div class="footer">feito por mim üéÑ</div>
    </div>
  </div>

  <script>
    // =========================
    // CONTE√öDO
    // =========================
    const CONFIG = {
      targetName: "Tainah Bonazzi",
      voucherAmount: "R$ 120",
      hints: [
        "J√° viajou muito ‚úàÔ∏è",
        "Extremamente inteligente e engra√ßada üòÑ",
        "Nunca ganha de mim nos jogos üéÆ (ainda üòå)",
        "Eu tenho muito orgulho da pessoa que ela √© ‚ú®",
        "Tenho uma admira√ß√£o gigantesca pelo jeito dela ser üíõ",
        "E‚Ä¶ √© minha priminha do cora√ß√£o ü´∂"
      ],
      message:
        "Tainah‚Ä¶ isso aqui √© simples, mas √© de cora√ß√£o. " +
        "Eu tenho muito orgulho de voc√™ e de tudo que voc√™ √©. " +
        "Feliz Natal üéÑ‚ú®üíõ",
      whatsappToGustavo: "5511977840839",

      // YouTube (o link que voc√™ mandou)
      youtubeVideoId: "j_xZPtpHS9E"
    };

    // UI setup
    document.getElementById("targetName").textContent = CONFIG.targetName + " ‚ú®";
    document.getElementById("message").textContent = CONFIG.message;
    document.getElementById("amount").textContent = CONFIG.voucherAmount;

    const pistasEl = document.getElementById("pistas");
    const stepTitle = document.getElementById("stepTitle");
    const nextHint = document.getElementById("nextHint");
    const revealBtn = document.getElementById("revealBtn");
    const reveal = document.getElementById("reveal");
    const confetti = document.getElementById("confetti");

    let shown = 1;
    renderHints();

    function renderHints(){
      stepTitle.textContent = `Pista ${Math.min(shown, CONFIG.hints.length)} de ${CONFIG.hints.length}`;
      pistasEl.innerHTML = "";
      for (let i=0; i<shown; i++){
        const row = document.createElement("div");
        row.className = "pista";
        row.innerHTML = `<div class="num">${i+1}</div><p>${escapeHtml(CONFIG.hints[i])}</p>`;
        pistasEl.appendChild(row);
      }
      if (shown >= CONFIG.hints.length){
        nextHint.disabled = true;
        nextHint.style.opacity = .7;
        nextHint.style.cursor = "default";
      }
    }

    nextHint.addEventListener("click", () => {
      if (shown < CONFIG.hints.length){
        shown++;
        renderHints();
      }
    });

    revealBtn.addEventListener("click", () => {
      reveal.style.display = "block";
      launchConfetti();
      reveal.scrollIntoView({ behavior:"smooth", block:"start" });
    });

    function launchConfetti(){
      confetti.style.display = "block";
      confetti.innerHTML = "";
      const pieces = 38;
      for (let i=0;i<pieces;i++){
        const el = document.createElement("i");
        const left = Math.random()*100;
        const delay = Math.random()*0.25;
        const duration = 0.95 + Math.random()*0.95;
        const hue = Math.floor(Math.random()*360);
        el.style.left = left + "%";
        el.style.animationDelay = delay + "s";
        el.style.animationDuration = duration + "s";
        el.style.background = `linear-gradient(180deg, hsla(${hue},95%,75%,1), hsla(${hue},95%,75%,0))`;
        el.style.top = "-18px";
        confetti.appendChild(el);
      }
      setTimeout(() => { confetti.style.display = "none"; confetti.innerHTML = ""; }, 1800);
    }

    // WhatsApp + copiar
    const whatsBtn = document.getElementById("whatsBtn");
    const copyMsg = document.getElementById("copyMsg");
    const textToGustavo =
      `Oi Gustavo! üéÑ Vi o site do amigo secreto üòÑ Pode me transferir o vale de ${CONFIG.voucherAmount}? üíõ`;
    whatsBtn.href = `https://wa.me/${CONFIG.whatsappToGustavo}?text=${encodeURIComponent(textToGustavo)}`;

    copyMsg.addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(textToGustavo);
        copyMsg.textContent = "Copiado ‚úÖ";
        setTimeout(() => copyMsg.textContent = "Copiar mensagem", 1200);
      }catch(e){
        const ta = document.createElement("textarea");
        ta.value = textToGustavo;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        document.body.removeChild(ta);
        copyMsg.textContent = "Copiado ‚úÖ";
        setTimeout(() => copyMsg.textContent = "Copiar mensagem", 1200);
      }
    });

    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, c => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      }[c]));
    }

    // =========================
    // NEVE CAINDO (canvas)
    // =========================
    const canvas = document.getElementById("snow");
    const ctx = canvas.getContext("2d");
    let w, h, flakes;

    function resize(){
      w = canvas.width = window.innerWidth * devicePixelRatio;
      h = canvas.height = window.innerHeight * devicePixelRatio;
      canvas.style.width = window.innerWidth + "px";
      canvas.style.height = window.innerHeight + "px";

      const count = Math.min(140, Math.floor(window.innerWidth / 6));
      flakes = Array.from({length: count}, () => makeFlake(true));
    }

    function makeFlake(init=false){
      const x = Math.random() * w;
      const y = init ? Math.random() * h : -20 * devicePixelRatio;
      const r = (Math.random() * 2.2 + 0.8) * devicePixelRatio;
      const sp = (Math.random() * 1.3 + 0.6) * devicePixelRatio;
      const drift = (Math.random() * 0.8 + 0.2) * devicePixelRatio;
      const alpha = Math.random() * 0.45 + 0.20;
      return {x,y,r,sp,drift,alpha,phase:Math.random()*Math.PI*2};
    }

    function tickSnow(t){
      ctx.clearRect(0,0,w,h);
      ctx.fillStyle = "white";
      for (let i=0;i<flakes.length;i++){
        const f = flakes[i];
        f.phase += 0.01;
        f.y += f.sp;
        f.x += Math.sin(f.phase) * f.drift;

        if (f.y > h + 30) flakes[i] = makeFlake(false);

        ctx.globalAlpha = f.alpha;
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
        ctx.fill();
      }
      ctx.globalAlpha = 1;
      requestAnimationFrame(tickSnow);
    }

    window.addEventListener("resize", resize);
    resize();
    requestAnimationFrame(tickSnow);

      // =========================
  // M√öSICA do YouTube (modo mais confi√°vel)
  // Cria um iframe somente quando o usu√°rio toca em "Tocar"
  // =========================
  const musicToggle = document.getElementById("musicToggle");
  const modal = document.getElementById("musicModal");
  const modalPlay = document.getElementById("modalPlay");
  const modalClose = document.getElementById("modalClose");

  const VIDEO_ID = "j_xZPtpHS9E"; // seu link

  let playing = false;
  let iframeEl = null;

  function openModal(){
    modal.style.display = "grid";
    modal.setAttribute("aria-hidden", "false");
  }
  function closeModal(){
    modal.style.display = "none";
    modal.setAttribute("aria-hidden", "true");
  }

  musicToggle.addEventListener("click", openModal);
  modalClose.addEventListener("click", closeModal);

  function startYT(){
    if (playing) return;

    // Cria iframe ‚Äúoficial‚Äù do YouTube
    iframeEl = document.createElement("iframe");

    // Importante: loop precisa de playlist=VIDEO_ID
    const src =
      `https://www.youtube.com/embed/${VIDEO_ID}` +
      `?autoplay=1&playsinline=1&controls=0&rel=0&modestbranding=1` +
      `&loop=1&playlist=${VIDEO_ID}`;

    iframeEl.src = src;
    iframeEl.allow =
      "autoplay; encrypted-media; fullscreen; picture-in-picture";
    iframeEl.setAttribute("allowfullscreen", "1");
    iframeEl.style.position = "fixed";
    iframeEl.style.left = "-10000px";
    iframeEl.style.top = "-10000px";
    iframeEl.style.width = "1px";
    iframeEl.style.height = "1px";
    iframeEl.style.border = "0";

    document.body.appendChild(iframeEl);

    playing = true;
    musicToggle.textContent = "‚è∏Ô∏è M√∫sica";
  }

  function stopYT(){
    if (!playing) return;
    if (iframeEl && iframeEl.parentNode) iframeEl.parentNode.removeChild(iframeEl);
    iframeEl = null;

    playing = false;
    musicToggle.textContent = "üéµ M√∫sica";
  }

  modalPlay.addEventListener("click", () => {
    closeModal();
    if (!playing) startYT();
    else stopYT();
  });
  </script>
</body>
</html>
